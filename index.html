<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- PWA Core Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#4CAF50">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#4CAF50">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#2E7D32">
    <meta name="background-color" content="#ffffff">
    <meta name="description" content="BubblePop - Ê≥°„ÇíÂâ≤„Å£„Å¶È´ò„Çπ„Ç≥„Ç¢„ÇíÁõÆÊåá„Åô„Ç¢„ÇØ„Ç∑„Éß„É≥„Ç≤„Éº„É†">
    <meta name="keywords" content="„Ç≤„Éº„É†,Ê≥°,„Ç¢„ÇØ„Ç∑„Éß„É≥,HTML5,Canvas">
    
    <!-- Additional PWA Meta Tags -->
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <meta name="orientation" content="portrait-primary">
    <meta name="screen-orientation" content="portrait">
    <meta name="full-screen" content="yes">
    <meta name="browsermode" content="application">
    
    <!-- Security and Privacy -->
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' data: blob: fonts.googleapis.com *.googleapis.com *.gstatic.com; style-src-elem 'self' 'unsafe-inline' data: blob: fonts.googleapis.com *.googleapis.com *.gstatic.com; img-src 'self' data: blob:; connect-src 'self' fonts.gstatic.com *.gstatic.com; font-src 'self' data: blob: fonts.gstatic.com *.gstatic.com; worker-src 'self';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <!-- X-Frame-Options removed for local execution compatibility -->
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <!-- Local Execution Detection Script -->
    <script>
        // Early local execution detection before main scripts load
        (function() {
            if (window.location.protocol === 'file:') {
                // Add local execution class to html element
                document.documentElement.classList.add('awaputi-local-execution');
                
                // Store detection result for main script
                window.AWAPUTI_LOCAL_EXECUTION = true;
                
                // Remove restrictive CSP for local execution and allow Google Fonts
                const cspMeta = document.querySelector('meta[http-equiv="Content-Security-Policy"]');
                if (cspMeta) {
                    cspMeta.setAttribute('content', 'default-src * data: blob: filesystem:; script-src * data: blob: \'unsafe-inline\' \'unsafe-eval\'; style-src * data: blob: \'unsafe-inline\' fonts.googleapis.com *.googleapis.com *.gstatic.com; style-src-elem * data: blob: \'unsafe-inline\' fonts.googleapis.com *.googleapis.com *.gstatic.com; img-src * data: blob: filesystem:; connect-src * data: blob: filesystem: fonts.gstatic.com *.gstatic.com; font-src * data: blob: filesystem: fonts.gstatic.com *.gstatic.com; worker-src * data: blob: filesystem:;');
                }
                
                console.log('üè† Local file execution detected - optimizing for local mode');
            } else {
                window.AWAPUTI_LOCAL_EXECUTION = false;
            }
        })();
    </script>
    
    <!-- Performance Hints -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    
    <!-- SEO Meta Tags will be dynamically injected by SEOMetaManager -->
    <div id="seo-meta-injection-point"></div>
    
    <!-- Structured Data will be dynamically injected by StructuredDataEngine -->
    <div id="structured-data-injection-point"></div>
    <title>BubblePop - Ê≥°Ââ≤„Çä„Ç≤„Éº„É†</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- PWAÈñ¢ÈÄ£„É°„Çø„Çø„Ç∞ -->
    <meta name="application-name" content="BubblePop">
    <meta name="msapplication-TileColor" content="#4CAF50">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <!-- Apple PWA „É°„Çø„Çø„Ç∞ -->
    <meta name="apple-mobile-web-app-title" content="BubblePop">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-orientations" content="portrait">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">
    
    <!-- Apple Splash Screens -->
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-1024x1366.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-834x1194.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-768x1024.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-375x812.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-414x896.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-375x667.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-320x568.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    
    <!-- Latest iPhone Models -->
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-390x844.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-393x852.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-430x932.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    
    <!-- Additional Apple Device Support -->
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-896x414.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-812x375.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-1366x1024.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-1194x834.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-1024x768.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    
    <!-- Latest iPhone Models Landscape -->
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-844x390.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-852x393.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/assets/splash-screens/apple-splash-932x430.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    
    <!-- Microsoft PWA „É°„Çø„Çø„Ç∞ -->
    <meta name="msapplication-starturl" content="/">
    <meta name="msapplication-tooltip" content="BubblePop - Ê≥°Ââ≤„Çä„Ç≤„Éº„É†">
    <meta name="msapplication-navbutton-color" content="#4CAF50">
    <meta name="msapplication-window" content="width=1024;height=768">
    <meta name="msapplication-task" content="name=„Ç≤„Éº„É†ÈñãÂßã;action-uri=/;icon-uri=/assets/icons/favicon-32x32.png">
    <meta name="msapplication-task" content="name=Áµ±Ë®à;action-uri=/?action=stats;icon-uri=/assets/icons/favicon-32x32.png">
    <meta name="msapplication-allowDomainApiCalls" content="true">
    <meta name="msapplication-allowDomainMetaTags" content="true">
    
    <!-- Windows 8/10 Tiles -->
    <meta name="msapplication-square70x70logo" content="/assets/icons/mstile-70x70.png">
    <meta name="msapplication-square150x150logo" content="/assets/icons/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/assets/icons/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/assets/icons/mstile-310x310.png">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#4CAF50">
    
    <!-- Additional PWA Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/icons/icon-512x512.png">
    <link rel="stylesheet" href="src/styles/accessibility.css">
    <style>
        /* „É™„Çª„ÉÉ„ÉàCSS */
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            min-height: -webkit-fill-available; /* iOS SafariÂØæÂøú */
            position: relative;
        }
        
        /* „Ç≤„Éº„É†„Ç≥„É≥„ÉÜ„Éä */
        #gameContainer {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            max-width: 100vw;
            max-height: 100vh;
        }
        
        /* Canvas „Çπ„Çø„Ç§„É´ */
        #gameCanvas {
            border: 2px solid #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            background: #000;
            display: block;
            max-width: 100%;
            max-height: 100%;
            
            /* „Çø„ÉÉ„ÉÅÊìç‰Ωú„ÅÆÊúÄÈÅ©Âåñ */
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            
            /* „Éè„Éº„Éâ„Ç¶„Çß„Ç¢„Ç¢„ÇØ„Çª„É©„É¨„Éº„Ç∑„Éß„É≥ */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            will-change: transform;
        }
        
        /* UI „Ç™„Éº„Éê„Éº„É¨„Ç§ */
        #gameUI {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 18px;
            z-index: 10;
            pointer-events: none;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            font-weight: bold;
            line-height: 1.4;
        }
        
        #gameUI > div {
            margin-bottom: 5px;
            background: rgba(0,0,0,0.3);
            padding: 4px 8px;
            border-radius: 4px;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media screen and (max-width: 768px) {
            body {
                padding: 0;
            }
            
            #gameCanvas {
                border-radius: 5px;
                border-width: 1px;
            }
            
            #gameUI {
                font-size: 14px;
                top: 5px;
                left: 5px;
            }
        }
        
        @media screen and (max-width: 480px) {
            #gameUI {
                font-size: 12px;
                top: 2px;
                left: 2px;
            }
            
            #gameUI > div {
                padding: 2px 6px;
                margin-bottom: 3px;
            }
        }
        
        /* Ê®™Âêë„ÅçÂØæÂøú */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            #gameUI {
                font-size: 12px;
                top: 2px;
                left: 2px;
            }
        }
        
        /* È´òDPIÂØæÂøú */
        @media screen and (-webkit-min-device-pixel-ratio: 2),
               screen and (min-resolution: 192dpi) {
            #gameCanvas {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
        }
        
        /* „ÉÄ„Éº„ÇØ„É¢„Éº„ÉâÂØæÂøú */
        @media (prefers-color-scheme: dark) {
            #gameUI {
                color: #f0f0f0;
            }
        }
        
        /* „Éï„É´„Çπ„ÇØ„É™„Éº„É≥ÂØæÂøú */
        #gameCanvas:fullscreen {
            border: none;
            border-radius: 0;
        }
        
        #gameCanvas:-webkit-full-screen {
            border: none;
            border-radius: 0;
        }
        
        #gameCanvas:-moz-full-screen {
            border: none;
            border-radius: 0;
        }
        
        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢ */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            font-size: 24px;
            text-align: center;
        }
        
        #loadingScreen.hidden {
            display: none;
        }
        
        /* „Ç®„É©„ÉºÁîªÈù¢ */
        .error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 2000;
            max-width: 90%;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        
        /* „Éñ„É©„Ç¶„Ç∂Âõ∫Êúâ„ÅÆË™øÊï¥ */
        
        /* Safari Âõ∫Êúâ */
        @supports (-webkit-appearance: none) {
            body {
                -webkit-overflow-scrolling: touch;
            }
            
            #gameCanvas {
                -webkit-backface-visibility: hidden;
                backface-visibility: hidden;
            }
        }
        
        /* Firefox Âõ∫Êúâ */
        @-moz-document url-prefix() {
            #gameCanvas {
                image-rendering: -moz-crisp-edges;
            }
        }
        
        /* Edge/IE Âõ∫Êúâ */
        @supports (-ms-ime-align: auto) {
            #gameCanvas {
                -ms-interpolation-mode: nearest-neighbor;
            }
        }
        
        /* „Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Âç∞Âà∑ÂØæÂøú */
        @media print {
            body {
                background: white;
            }
            
            #gameCanvas {
                border: 1px solid black;
            }
        }
    </style>
</head>
<body>
    <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁîªÈù¢ -->
    <div id="loadingScreen" role="status" aria-live="polite" aria-label="„Ç≤„Éº„É†Ë™≠„ÅøËæº„Åø‰∏≠">
        <div>
            <div>BubblePop</div>
            <div style="font-size: 16px; margin-top: 10px;">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
            <div class="loading-spinner" aria-hidden="true"></div>
        </div>
    </div>
    
    <!-- „Çπ„ÇØ„É™„Éº„É≥„É™„Éº„ÉÄ„ÉºÁî®„ÅÆË™¨Êòé -->
    <div class="screen-reader-only">
        <h1>BubblePop - Ê≥°Ââ≤„Çä„Ç≤„Éº„É†</h1>
        <p>ÁîªÈù¢„Å´Áèæ„Çå„ÇãÊ≥°„Çí„ÇØ„É™„ÉÉ„ÇØ„Åæ„Åü„ÅØ„Çø„ÉÉ„Éó„Åó„Å¶Ââ≤„Çä„ÄÅÈ´ò„Çπ„Ç≥„Ç¢„ÇíÁõÆÊåá„Åô„Ç¢„ÇØ„Ç∑„Éß„É≥„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p>
        <p>„Ç≠„Éº„Éú„Éº„Éâ„Ç∑„Éß„Éº„Éà„Ç´„ÉÉ„Éà: „Çπ„Éö„Éº„Çπ„Ç≠„Éº„Åß‰∏ÄÊôÇÂÅúÊ≠¢„ÄÅEsc„Ç≠„Éº„Åß„É°„Éã„É•„Éº„ÄÅF„Ç≠„Éº„Åß„Éï„É´„Çπ„ÇØ„É™„Éº„É≥</p>
    </div>
    
    <!-- „Ç≤„Éº„É†„Ç≥„É≥„ÉÜ„Éä -->
    <div id="gameContainer" role="main">
        <canvas id="gameCanvas" 
                width="800" 
                height="600" 
                role="img" 
                aria-label="„Ç≤„Éº„É†ÁîªÈù¢"
                tabindex="0"
                aria-describedby="gameInstructions"></canvas>
        
        <!-- „Ç≤„Éº„É†Áä∂ÊÖãË°®Á§∫ -->
        <div id="gameUI" role="status" aria-live="polite" aria-label="„Ç≤„Éº„É†Áä∂ÊÖã">
            <div aria-label="ÁèæÂú®„ÅÆ„Çπ„Ç≥„Ç¢">„Çπ„Ç≥„Ç¢: <span id="score">0</span></div>
            <div aria-label="ÊÆã„ÇäHP">HP: <span id="hp">100</span></div>
            <div aria-label="ÊÆã„ÇäÊôÇÈñì">ÊôÇÈñì: <span id="time">5:00</span></div>
        </div>
        
        <!-- „Ç≤„Éº„É†Ë™¨ÊòéÔºà„Çπ„ÇØ„É™„Éº„É≥„É™„Éº„ÉÄ„ÉºÁî®Ôºâ -->
        <div id="gameInstructions" class="screen-reader-only">
            <p>Ê≥°„Çí„ÇØ„É™„ÉÉ„ÇØ„Åæ„Åü„ÅØ„Çø„ÉÉ„Éó„Åó„Å¶Ââ≤„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ„Éâ„É©„ÉÉ„Ç∞„ÅßÊ≥°„ÇíÂêπ„ÅçÈ£õ„Å∞„Åô„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ</p>
            <p>„Éî„É≥„ÇØ„ÅÆÊ≥°„ÅØHP„ÇíÂõûÂæ©„Åó„ÄÅÊØí„ÅÆÊ≥°„ÅØ„ÉÄ„É°„Éº„Ç∏„Çí‰∏é„Åà„Åæ„Åô„ÄÇ</p>
            <p>ÊôÇÈñìÂÜÖ„Å´„Åß„Åç„Çã„Å†„ÅëÂ§ö„Åè„ÅÆÊ≥°„ÇíÂâ≤„Å£„Å¶È´ò„Çπ„Ç≥„Ç¢„ÇíÁõÆÊåá„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
        </div>
    </div>
    
    <!-- „Ç≠„Éº„Éú„Éº„Éâ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥Áî®„ÅÆ„Éï„Ç©„Éº„Ç´„ÇπË°®Á§∫ -->
    <div id="focusIndicator" class="screen-reader-only" aria-live="polite"></div>
    
    <script type="module">
        // SEO „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ
        import { SEOMetaManager } from './src/seo/SEOMetaManager.js';
        import { StructuredDataEngine } from './src/seo/StructuredDataEngine.js';
        import { seoLogger } from './src/seo/SEOLogger.js';
        import { seoErrorHandler } from './src/seo/SEOErrorHandler.js';
        
        // PWAÂàùÊúüÂåñ„Çπ„ÇØ„É™„Éó„Éà
        import { getPWAManager } from './src/core/PWAManager.js';
        
        // SEO„Ç∑„Çπ„ÉÜ„É†„ÅÆÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                seoLogger.info('SEO system initialization started');
                
                // SEOMetaManager„ÅÆÂàùÊúüÂåñ
                const seoMetaManager = new SEOMetaManager();
                
                // ÂãïÁöÑ„É°„Çø„Çø„Ç∞„ÅÆÁîüÊàê„Å®Ê≥®ÂÖ•
                const metaInjectionPoint = document.getElementById('seo-meta-injection-point');
                if (metaInjectionPoint) {
                    try {
                        await seoMetaManager.updateDynamicContent({});
                        seoLogger.info('Dynamic meta tags updated successfully');
                    } catch (error) {
                        seoLogger.error('Failed to inject dynamic meta tags', error);
                        // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Âü∫Êú¨ÁöÑ„Å™„É°„Çø„Çø„Ç∞„ÇíÊâãÂãï„ÅßËøΩÂä†
                        metaInjectionPoint.innerHTML = `
                            <!-- Basic SEO Meta Tags (Fallback) -->
                            <meta name="author" content="BubblePop Game Team">
                            <meta name="robots" content="index, follow">
                            <meta name="rating" content="general">
                            <meta property="og:type" content="website">
                            <meta property="og:title" content="BubblePop - Ê≥°Ââ≤„Çä„Ç≤„Éº„É†">
                            <meta property="og:description" content="HTML5 Canvas „Çí‰ΩøÁî®„Åó„Åü„Éê„Éñ„É´„Éù„ÉÉ„Éó„Ç≤„Éº„É†">
                            <meta name="twitter:card" content="summary_large_image">
                            <meta name="twitter:title" content="BubblePop - Ê≥°Ââ≤„Çä„Ç≤„Éº„É†">
                        `;
                    }
                }
                
                // StructuredDataEngine„ÅÆÂàùÊúüÂåñ
                const structuredDataEngine = new StructuredDataEngine();
                
                // ÊßãÈÄ†Âåñ„Éá„Éº„Çø„ÅÆÁîüÊàê„Å®Ê≥®ÂÖ•
                const structuredDataInjectionPoint = document.getElementById('structured-data-injection-point');
                if (structuredDataInjectionPoint) {
                    try {
                        const structuredData = await structuredDataEngine.generateVideoGameSchema();
                        const scriptTag = document.createElement('script');
                        scriptTag.type = 'application/ld+json';
                        scriptTag.textContent = JSON.stringify(structuredData, null, 2);
                        structuredDataInjectionPoint.appendChild(scriptTag);
                        seoLogger.info('Structured data injected successfully');
                    } catch (error) {
                        seoLogger.error('Failed to inject structured data', error);
                        // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Âü∫Êú¨ÁöÑ„Å™ÊßãÈÄ†Âåñ„Éá„Éº„Çø„ÇíÊâãÂãï„ÅßËøΩÂä†
                        const fallbackScript = document.createElement('script');
                        fallbackScript.type = 'application/ld+json';
                        fallbackScript.textContent = JSON.stringify({
                            "@context": "https://schema.org",
                            "@type": "VideoGame",
                            "name": "BubblePop",
                            "description": "HTML5 Canvas „Çí‰ΩøÁî®„Åó„Åü„Éê„Éñ„É´„Éù„ÉÉ„Éó„Ç≤„Éº„É†",
                            "genre": ["Action", "Casual"],
                            "applicationCategory": "Game",
                            "operatingSystem": "Web Browser",
                            "isAccessibleForFree": true
                        }, null, 2);
                        structuredDataInjectionPoint.appendChild(fallbackScript);
                    }
                }
                
                // „Ç∞„É≠„Éº„Éê„É´„Å´„Ç¢„ÇØ„Çª„ÇπÂèØËÉΩ„Å´„Åô„Çã
                window.seoMetaManager = seoMetaManager;
                window.structuredDataEngine = structuredDataEngine;
                
                seoLogger.info('SEO system initialization completed');
                
            } catch (error) {
                seoErrorHandler.handle(error, 'seoSystemInit');
            }
        });
        
        // PWAÊ©üËÉΩ„ÅÆÂàùÊúüÂåñ
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    console.log('[PWA] PWAÊ©üËÉΩ„ÇíÂàùÊúüÂåñ‰∏≠...');
                    
                    // PWAManager„ÇíÂàùÊúüÂåñ
                    const pwaManager = getPWAManager();
                    await pwaManager.initialize();
                    
                    console.log('[PWA] PWAÊ©üËÉΩÂàùÊúüÂåñÂÆå‰∫Ü');
                    
                    // „Ç∞„É≠„Éº„Éê„É´„Å´„Ç¢„ÇØ„Çª„ÇπÂèØËÉΩ„Å´„Åô„Çã
                    window.pwaManager = pwaManager;
                    
                } catch (error) {
                    console.error('[PWA] PWAÂàùÊúüÂåñ„Ç®„É©„Éº:', error);
                }
            });
        } else {
            console.log('[PWA] Service Worker„ÅØ„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
        }
        
        // PWAÈñ¢ÈÄ£„ÅÆUI„Ç§„Éô„É≥„ÉàÂá¶ÁêÜ
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('[PWA] „Ç§„É≥„Çπ„Éà„Éº„É´„Éó„É≠„É≥„Éó„ÉàÊ∫ñÂÇôÂÆå‰∫Ü');
        });
        
        window.addEventListener('appinstalled', (e) => {
            console.log('[PWA] „Ç¢„Éó„É™„Åå„Ç§„É≥„Çπ„Éà„Éº„É´„Åï„Çå„Åæ„Åó„Åü');
        });
        
        // „Ç™„É≥„É©„Ç§„É≥/„Ç™„Éï„É©„Ç§„É≥Áä∂ÊÖã„ÅÆÁõ£Ë¶ñ
        window.addEventListener('online', () => {
            console.log('[PWA] „Ç™„É≥„É©„Ç§„É≥Áä∂ÊÖã„Å´Âæ©Â∏∞');
        });
        
        window.addEventListener('offline', () => {
            console.log('[PWA] „Ç™„Éï„É©„Ç§„É≥Áä∂ÊÖã„Å´ÁßªË°å');
        });
    </script>
    <!-- Main Application Script with Local Execution Fallback -->
    <script type="module" src="src/main.js" onerror="handleModuleLoadError(event)"></script>
    
    <!-- Fallback Script for Local Execution -->
    <script>
        function handleModuleLoadError(event) {
            console.warn('ES6 module loading failed, this is expected in local file execution');
            
            // Show user-friendly message for local execution
            if (window.location.protocol === 'file:') {
                const fallbackDiv = document.createElement('div');
                fallbackDiv.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: #fff3cd;
                    color: #856404;
                    padding: 20px;
                    border: 1px solid #ffeaa7;
                    border-radius: 8px;
                    max-width: 500px;
                    z-index: 10000;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                `;
                
                fallbackDiv.innerHTML = `
                    <h3 style="margin: 0 0 15px 0; color: #721c24;">‚ö†Ô∏è Local File Execution Detected</h3>
                    <p style="margin: 0 0 15px 0;">
                        This game is running from a local file. For the best experience, please use a development server:
                    </p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <strong>Recommended:</strong><br>
                        <code style="background: #e9ecef; padding: 2px 4px; border-radius: 3px;">npm run dev</code>
                    </div>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <strong>Alternatives:</strong><br>
                        <code style="background: #e9ecef; padding: 2px 4px; border-radius: 3px;">python -m http.server 8000</code><br>
                        <code style="background: #e9ecef; padding: 2px 4px; border-radius: 3px;">npx serve .</code>
                    </div>
                    <button onclick="this.parentElement.remove()" style="
                        background: #007bff;
                        color: white;
                        border: none;
                        padding: 8px 16px;
                        border-radius: 4px;
                        cursor: pointer;
                        margin-top: 10px;
                    ">Continue Anyway</button>
                `;
                
                document.body.appendChild(fallbackDiv);
            }
        }
        
        // Hide loading screen after a timeout if modules fail to load
        setTimeout(() => {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen && !loadingScreen.classList.contains('hidden')) {
                loadingScreen.style.display = 'none';
            }
        }, 5000);
    </script>
</body>
</html>