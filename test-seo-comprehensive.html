<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Comprehensive Test Suite - BubblePop</title>
    <meta name="description" content="HTML5 Canvas ã‚’ä½¿ç”¨ã—ãŸãƒãƒ–ãƒ«ãƒãƒƒãƒ—ã‚²ãƒ¼ãƒ ã€‚18ç¨®é¡ä»¥ä¸Šã®ç‰¹æ®Šãªæ³¡ã‚’å‰²ã£ã¦é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼">
    <meta name="keywords" content="ãƒãƒ–ãƒ«ãƒãƒƒãƒ—,ã‚²ãƒ¼ãƒ ,HTML5,ãƒ–ãƒ©ã‚¦ã‚¶ã‚²ãƒ¼ãƒ ,ç„¡æ–™,æ³¡å‰²ã‚Š,ãƒ‘ã‚ºãƒ«">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="BubblePop - æ³¡å‰²ã‚Šã‚²ãƒ¼ãƒ ">
    <meta property="og:description" content="HTML5 Canvas ã‚’ä½¿ç”¨ã—ãŸãƒãƒ–ãƒ«ãƒãƒƒãƒ—ã‚²ãƒ¼ãƒ ã€‚18ç¨®é¡ä»¥ä¸Šã®ç‰¹æ®Šãªæ³¡ã‚’å‰²ã£ã¦é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼">
    <meta property="og:image" content="/assets/images/og-image.png">
    <meta property="og:url" content="https://example.com">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BubblePop - æ³¡å‰²ã‚Šã‚²ãƒ¼ãƒ ">
    <meta name="twitter:description" content="HTML5 Canvas ã‚’ä½¿ç”¨ã—ãŸãƒãƒ–ãƒ«ãƒãƒƒãƒ—ã‚²ãƒ¼ãƒ ã€‚18ç¨®é¡ä»¥ä¸Šã®ç‰¹æ®Šãªæ³¡ã‚’å‰²ã£ã¦é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼">
    <meta name="twitter:image" content="/assets/images/twitter-card.png">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "BubblePop - æ³¡å‰²ã‚Šã‚²ãƒ¼ãƒ ",
        "description": "HTML5 Canvas ã‚’ä½¿ç”¨ã—ãŸãƒãƒ–ãƒ«ãƒãƒƒãƒ—ã‚²ãƒ¼ãƒ ã€‚18ç¨®é¡ä»¥ä¸Šã®ç‰¹æ®Šãªæ³¡ã‚’å‰²ã£ã¦é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼",
        "genre": "ãƒ‘ã‚ºãƒ«ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³",
        "gamePlatform": ["Web Browser", "Progressive Web App"],
        "operatingSystem": ["Any"],
        "applicationCategory": "Game",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "JPY",
            "availability": "https://schema.org/InStock"
        },
        "creator": {
            "@type": "Organization",
            "name": "BubblePop Development Team"
        }
    }
    </script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .button:hover {
            background: #45a049;
        }
        .button.secondary {
            background: #2196F3;
        }
        .button.secondary:hover {
            background: #1976D2;
        }
        .button.warning {
            background: #FF9800;
        }
        .button.warning:hover {
            background: #F57C00;
        }
        .button.danger {
            background: #f44336;
        }
        .button.danger:hover {
            background: #d32f2f;
        }
        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .test-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-category {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        .test-category h3 {
            margin-top: 0;
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        .test-item {
            margin: 10px 0;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
        }
        .test-item.passed {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            color: #2e7d32;
        }
        .test-item.failed {
            background: #ffebee;
            border-left: 4px solid #f44336;
            color: #d32f2f;
        }
        .test-item.warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            color: #ef6c00;
        }
        .score-display {
            text-align: center;
            font-size: 48px;
            font-weight: bold;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
        }
        .score-display.excellent {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .score-display.good {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        .score-display.needs-improvement {
            background: #fff3e0;
            color: #ef6c00;
        }
        .score-display.poor {
            background: #ffebee;
            color: #d32f2f;
        }
        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f5f5f5;
            border: none;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab:hover,
        .tab.active {
            background: #4CAF50;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .monitoring-controls {
            background: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        .monitoring-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .monitoring-status.active {
            background: #e8f5e8;
            color: #2e7d32;
        }
        .monitoring-status.inactive {
            background: #ffebee;
            color: #d32f2f;
        }
        .alert-item {
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .alert-item.critical {
            background: #ffebee;
            border-left: 4px solid #f44336;
            color: #d32f2f;
        }
        .alert-item.warning {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            color: #ef6c00;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        .progress-fill.excellent {
            background: linear-gradient(90deg, #4CAF50, #66BB6A);
        }
        .progress-fill.good {
            background: linear-gradient(90deg, #9C27B0, #BA68C8);
        }
        .progress-fill.needs-improvement {
            background: linear-gradient(90deg, #FF9800, #FFB74D);
        }
        .progress-fill.poor {
            background: linear-gradient(90deg, #f44336, #EF5350);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” SEOåŒ…æ‹¬ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ</h1>
        <p>BubblePopã‚²ãƒ¼ãƒ ã®SEOæœ€é©åŒ–ã‚’åŒ…æ‹¬çš„ã«ãƒ†ã‚¹ãƒˆã—ã€ç›£è¦–ã—ã¾ã™ã€‚</p>
        
        <div class="tabs">
            <button class="tab active" data-tab="validation">SEOæ¤œè¨¼</button>
            <button class="tab" data-tab="monitoring">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–</button>
            <button class="tab" data-tab="lighthouse">Lighthouseã‚¹ã‚³ã‚¢</button>
            <button class="tab" data-tab="reporting">ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
        </div>
    </div>
    
    <!-- SEOæ¤œè¨¼ã‚¿ãƒ– -->
    <div class="tab-content active" id="validation">
        <div class="container">
            <h2>ğŸ¯ SEOåŒ…æ‹¬æ¤œè¨¼</h2>
            <div class="controls">
                <button class="button" onclick="runComprehensiveTest()">ğŸš€ åŒ…æ‹¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
                <button class="button secondary" onclick="runQuickTest()">âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</button>
                <button class="button secondary" onclick="validateMetaTags()">ğŸ·ï¸ ãƒ¡ã‚¿ã‚¿ã‚°æ¤œè¨¼</button>
                <button class="button secondary" onclick="validateStructuredData()">ğŸ“Š æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼</button>
                <button class="button warning" onclick="clearTestResults()">ğŸ—‘ï¸ çµæœã‚¯ãƒªã‚¢</button>
            </div>
            
            <div id="overallScore" class="score-display" style="display: none;">
                <div class="score-value">-</div>
                <div style="font-size: 16px; margin-top: 10px;">ç·åˆSEOã‚¹ã‚³ã‚¢</div>
            </div>
            
            <div class="test-results" id="testResults">
                <!-- ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
            
            <div class="output" id="validationOutput">åŒ…æ‹¬ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
    </div>
    
    <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã‚¿ãƒ– -->
    <div class="tab-content" id="monitoring">
        <div class="container">
            <h2>ğŸ“Š ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ SEOç›£è¦–</h2>
            <div class="monitoring-controls">
                <h4>ç›£è¦–åˆ¶å¾¡</h4>
                <button class="button" onclick="startMonitoring()">â–¶ï¸ ç›£è¦–é–‹å§‹</button>
                <button class="button danger" onclick="stopMonitoring()">â¹ï¸ ç›£è¦–åœæ­¢</button>
                <button class="button warning" onclick="pauseMonitoring()">â¸ï¸ ä¸€æ™‚åœæ­¢</button>
                <button class="button secondary" onclick="resumeMonitoring()">â–¶ï¸ å†é–‹</button>
                <span class="monitoring-status inactive" id="monitoringStatus">åœæ­¢ä¸­</span>
            </div>
            
            <div class="monitoring-controls">
                <h4>ç›£è¦–è¨­å®š</h4>
                <label>
                    ç›£è¦–é–“éš”: 
                    <select id="monitoringInterval">
                        <option value="60000">1åˆ†</option>
                        <option value="300000" selected>5åˆ†</option>
                        <option value="600000">10åˆ†</option>
                        <option value="1800000">30åˆ†</option>
                    </select>
                </label>
                <label style="margin-left: 20px;">
                    <input type="checkbox" id="enableAlerts" checked> ã‚¢ãƒ©ãƒ¼ãƒˆæœ‰åŠ¹
                </label>
            </div>
            
            <div class="test-results">
                <div class="test-category">
                    <h3>ğŸ“ˆ ç¾åœ¨ã®ç›£è¦–ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h3>
                    <div id="currentMetrics">
                        <div class="test-item"><strong>Lighthouseã‚¹ã‚³ã‚¢:</strong> <span id="currentLighthouse">-</span></div>
                        <div class="test-item"><strong>LCP:</strong> <span id="currentLCP">-</span> ms</div>
                        <div class="test-item"><strong>FID:</strong> <span id="currentFID">-</span> ms</div>
                        <div class="test-item"><strong>CLS:</strong> <span id="currentCLS">-</span></div>
                        <div class="test-item"><strong>æœ€çµ‚ãƒã‚§ãƒƒã‚¯:</strong> <span id="lastCheck">-</span></div>
                    </div>
                </div>
                
                <div class="test-category">
                    <h3>ğŸš¨ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¢ãƒ©ãƒ¼ãƒˆ</h3>
                    <div id="activeAlerts">
                        <div class="test-item">ã‚¢ãƒ©ãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“</div>
                    </div>
                </div>
            </div>
            
            <div class="output" id="monitoringOutput">ç›£è¦–çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
    </div>
    
    <!-- Lighthouseã‚¹ã‚³ã‚¢ã‚¿ãƒ– -->
    <div class="tab-content" id="lighthouse">
        <div class="container">
            <h2>ğŸ® Lighthouseã‚¹ã‚³ã‚¢åˆ†æ</h2>
            <div class="controls">
                <button class="button" onclick="runLighthouseAudit()">ğŸ” Lighthouseç›£æŸ»å®Ÿè¡Œ</button>
                <button class="button secondary" onclick="trackCoreWebVitals()">ğŸ“Š Core Web Vitalsè¿½è·¡</button>
                <button class="button secondary" onclick="generatePerformanceReport()">ğŸ“„ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ</button>
            </div>
            
            <div class="test-results">
                <div class="test-category">
                    <h3>Lighthouseã‚¹ã‚³ã‚¢</h3>
                    <div id="lighthouseScores">
                        <div class="score-item">
                            <strong>Performance:</strong> <span id="performanceScore">-</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="performanceProgress" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="score-item">
                            <strong>Accessibility:</strong> <span id="accessibilityScore">-</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="accessibilityProgress" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="score-item">
                            <strong>Best Practices:</strong> <span id="bestPracticesScore">-</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="bestPracticesProgress" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="score-item">
                            <strong>SEO:</strong> <span id="seoScore">-</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="seoProgress" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="test-category">
                    <h3>Core Web Vitals</h3>
                    <div id="coreWebVitals">
                        <div class="test-item"><strong>LCP (Largest Contentful Paint):</strong> <span id="lcpValue">-</span> ms</div>
                        <div class="test-item"><strong>FID (First Input Delay):</strong> <span id="fidValue">-</span> ms</div>
                        <div class="test-item"><strong>CLS (Cumulative Layout Shift):</strong> <span id="clsValue">-</span></div>
                    </div>
                </div>
            </div>
            
            <div class="output" id="lighthouseOutput">Lighthouseåˆ†æçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
    </div>
    
    <!-- ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¿ãƒ– -->
    <div class="tab-content" id="reporting">
        <div class="container">
            <h2>ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</h2>
            <div class="controls">
                <button class="button" onclick="generateComprehensiveReport()">ğŸ“„ åŒ…æ‹¬ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
                <button class="button secondary" onclick="generateMonitoringReport()">ğŸ“ˆ ç›£è¦–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ</button>
                <button class="button secondary" onclick="exportTestResults()">ğŸ’¾ ãƒ†ã‚¹ãƒˆçµæœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                <button class="button warning" onclick="scheduleAutomatedReports()">â° è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆè¨­å®š</button>
            </div>
            
            <div class="monitoring-controls">
                <h4>ãƒ¬ãƒãƒ¼ãƒˆè¨­å®š</h4>
                <label>
                    ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: 
                    <select id="reportFormat">
                        <option value="html">HTML</option>
                        <option value="json">JSON</option>
                        <option value="csv">CSV</option>
                    </select>
                </label>
                <label style="margin-left: 20px;">
                    æœŸé–“: 
                    <select id="reportPeriod">
                        <option value="1hour">éå»1æ™‚é–“</option>
                        <option value="24hours" selected>éå»24æ™‚é–“</option>
                        <option value="7days">éå»7æ—¥é–“</option>
                        <option value="30days">éå»30æ—¥é–“</option>
                    </select>
                </label>
            </div>
            
            <div class="test-results">
                <div class="test-category">
                    <h3>ğŸ“ˆ ãƒ¬ãƒãƒ¼ãƒˆçµ±è¨ˆ</h3>
                    <div id="reportStats">
                        <div class="test-item"><strong>ç·æ¤œè¨¼å›æ•°:</strong> <span id="totalValidations">0</span></div>
                        <div class="test-item"><strong>ç·ã‚¢ãƒ©ãƒ¼ãƒˆæ•°:</strong> <span id="totalAlerts">0</span></div>
                        <div class="test-item"><strong>å¹³å‡SEOã‚¹ã‚³ã‚¢:</strong> <span id="averageSEOScore">-</span></div>
                        <div class="test-item"><strong>æœ€æ–°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ:</strong> <span id="lastReportTime">-</span></div>
                    </div>
                </div>
            </div>
            
            <div class="output" id="reportingOutput">ãƒ¬ãƒãƒ¼ãƒˆç”ŸæˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
        </div>
    </div>

    <script type="module">
        import { SEOTester } from './src/seo/SEOTester.js';
        import { SEOMonitor } from './src/seo/SEOMonitor.js';
        
        let seoTester;
        let seoMonitor;
        let lastTestResults = null;
        let monitoringActive = false;
        
        // åˆæœŸåŒ–
        async function initialize() {
            try {
                seoTester = new SEOTester();
                seoMonitor = new SEOMonitor();
                
                // ã‚¢ãƒ©ãƒ¼ãƒˆã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®è¨­å®š
                seoMonitor.addAlertCallback((alert) => {
                    displayAlert(alert);
                });
                
                log('ğŸš€ SEOåŒ…æ‹¬ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸ');
                log('ğŸ“Š å„ã‚¿ãƒ–ã§ãƒ†ã‚¹ãƒˆãƒ»ç›£è¦–æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™');
            } catch (error) {
                log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã®å®šç¾©
        window.runComprehensiveTest = async function() {
            try {
                log('ğŸš€ SEOåŒ…æ‹¬ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...');
                displayOverallScore('å®Ÿè¡Œä¸­...', 'needs-improvement');
                
                const startTime = performance.now();
                const results = await seoTester.runComprehensiveTest({
                    includeMetaTags: true,
                    includeStructuredData: true,
                    includeSocialMedia: true,
                    includePerformance: true,
                    includeAccessibility: true,
                    includeSitemap: true,
                    includeRobots: true
                });
                const endTime = performance.now();
                
                lastTestResults = results;
                
                // çµæœã®è¡¨ç¤º
                displayTestResults(results);
                displayOverallScore(results.overallScore, getScoreClass(results.overallScore));
                
                log(`âœ… åŒ…æ‹¬ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ (${(endTime - startTime).toFixed(2)}ms)`);
                log(`ğŸ“Š ç·åˆã‚¹ã‚³ã‚¢: ${results.overallScore}%`);
                log(`âœ“ æˆåŠŸ: ${results.summary.passedTests}ã€âœ— å¤±æ•—: ${results.summary.failedTests}ã€âš  è­¦å‘Š: ${results.summary.warnings}`);
                
            } catch (error) {
                log(`âŒ åŒ…æ‹¬ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.runQuickTest = async function() {
            try {
                log('âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...');
                
                const results = await seoTester.runComprehensiveTest({
                    includeMetaTags: true,
                    includeStructuredData: true,
                    includeSocialMedia: false,
                    includePerformance: false,
                    includeAccessibility: false,
                    includeSitemap: false,
                    includeRobots: false
                });
                
                lastTestResults = results;
                displayTestResults(results);
                displayOverallScore(results.overallScore, getScoreClass(results.overallScore));
                
                log(`âœ… ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ - ã‚¹ã‚³ã‚¢: ${results.overallScore}%`);
                
            } catch (error) {
                log(`âŒ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.validateMetaTags = async function() {
            try {
                log('ğŸ·ï¸ ãƒ¡ã‚¿ã‚¿ã‚°æ¤œè¨¼ã‚’å®Ÿè¡Œä¸­...');
                
                const results = await seoTester.validateMetaTags();
                displaySingleCategoryResult(results);
                
                log(`âœ… ãƒ¡ã‚¿ã‚¿ã‚°æ¤œè¨¼å®Œäº† - æˆåŠŸ: ${results.passed}ã€å¤±æ•—: ${results.failed}ã€è­¦å‘Š: ${results.warnings}`);
                
            } catch (error) {
                log(`âŒ ãƒ¡ã‚¿ã‚¿ã‚°æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.validateStructuredData = async function() {
            try {
                log('ğŸ“Š æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚’å®Ÿè¡Œä¸­...');
                
                const results = await seoTester.validateStructuredData();
                displaySingleCategoryResult(results);
                
                log(`âœ… æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼å®Œäº† - æˆåŠŸ: ${results.passed}ã€å¤±æ•—: ${results.failed}ã€è­¦å‘Š: ${results.warnings}`);
                
            } catch (error) {
                log(`âŒ æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.startMonitoring = async function() {
            try {
                if (monitoringActive) {
                    log('âš ï¸ ç›£è¦–ã¯æ—¢ã«å®Ÿè¡Œä¸­ã§ã™', 'warning');
                    return;
                }
                
                const interval = parseInt(document.getElementById('monitoringInterval').value);
                const enableAlerts = document.getElementById('enableAlerts').checked;
                
                log('â–¶ï¸ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ SEOç›£è¦–ã‚’é–‹å§‹ã—ã¾ã™...');
                
                await seoMonitor.startMonitoring({
                    interval: interval,
                    includeLighthouse: true,
                    includeCoreWebVitals: true,
                    includeMetaTags: true,
                    enableAlerts: enableAlerts
                });
                
                monitoringActive = true;
                updateMonitoringStatus('active', 'ç›£è¦–ä¸­');
                
                // å®šæœŸçš„ãªãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
                startMetricsUpdate();
                
                log('âœ… SEOç›£è¦–ãŒé–‹å§‹ã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ç›£è¦–é–‹å§‹ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.stopMonitoring = function() {
            try {
                if (!monitoringActive) {
                    log('âš ï¸ ç›£è¦–ã¯å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã›ã‚“', 'warning');
                    return;
                }
                
                seoMonitor.stopMonitoring();
                monitoringActive = false;
                updateMonitoringStatus('inactive', 'åœæ­¢ä¸­');
                
                log('â¹ï¸ SEOç›£è¦–ã‚’åœæ­¢ã—ã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ç›£è¦–åœæ­¢ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.pauseMonitoring = function() {
            try {
                seoMonitor.pauseMonitoring();
                updateMonitoringStatus('inactive', 'ä¸€æ™‚åœæ­¢ä¸­');
                log('â¸ï¸ SEOç›£è¦–ã‚’ä¸€æ™‚åœæ­¢ã—ã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ç›£è¦–ä¸€æ™‚åœæ­¢ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.resumeMonitoring = function() {
            try {
                seoMonitor.resumeMonitoring();
                updateMonitoringStatus('active', 'ç›£è¦–ä¸­');
                log('â–¶ï¸ SEOç›£è¦–ã‚’å†é–‹ã—ã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ç›£è¦–å†é–‹ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.runLighthouseAudit = async function() {
            try {
                log('ğŸ” Lighthouseç›£æŸ»ã‚’å®Ÿè¡Œä¸­...');
                
                const lighthouseScore = await seoMonitor._checkLighthouseScore();
                displayLighthouseScores(lighthouseScore);
                
                log('âœ… Lighthouseç›£æŸ»ãŒå®Œäº†ã—ã¾ã—ãŸ');
                log(`ğŸ“Š ã‚¹ã‚³ã‚¢ - Performance: ${lighthouseScore.performance}, SEO: ${lighthouseScore.seo}`);
                
            } catch (error) {
                log(`âŒ Lighthouseç›£æŸ»ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.trackCoreWebVitals = async function() {
            try {
                log('ğŸ“Š Core Web Vitalsè¿½è·¡ã‚’é–‹å§‹...');
                
                const vitals = await seoMonitor._checkCoreWebVitals();
                displayCoreWebVitals(vitals);
                
                log('âœ… Core Web Vitalsè¿½è·¡ãŒå®Œäº†ã—ã¾ã—ãŸ');
                log(`ğŸ“ˆ LCP: ${vitals.LCP.toFixed(1)}ms, FID: ${vitals.FID.toFixed(1)}ms, CLS: ${vitals.CLS.toFixed(3)}`);
                
            } catch (error) {
                log(`âŒ Core Web Vitalsè¿½è·¡ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.generateComprehensiveReport = function() {
            try {
                log('ğŸ“„ åŒ…æ‹¬ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­...');
                
                if (!lastTestResults) {
                    log('âš ï¸ ãƒ†ã‚¹ãƒˆçµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚', 'warning');
                    return;
                }
                
                const format = document.getElementById('reportFormat').value;
                const report = seoTester.exportResults(lastTestResults, format);
                
                downloadReport(report, `seo-comprehensive-report.${format}`, format);
                
                log('âœ… åŒ…æ‹¬ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.generateMonitoringReport = function() {
            try {
                log('ğŸ“ˆ ç›£è¦–ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­...');
                
                const format = document.getElementById('reportFormat').value;
                const report = seoMonitor.generateReport(format);
                
                downloadReport(report, `seo-monitoring-report.${format}`, format);
                
                log('âœ… ç›£è¦–ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ç›£è¦–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.exportTestResults = function() {
            try {
                if (!lastTestResults) {
                    log('âš ï¸ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ†ã‚¹ãƒˆçµæœãŒã‚ã‚Šã¾ã›ã‚“', 'warning');
                    return;
                }
                
                const format = document.getElementById('reportFormat').value;
                const exported = seoTester.exportResults(lastTestResults, format);
                
                downloadReport(exported, `seo-test-results.${format}`, format);
                
                log('âœ… ãƒ†ã‚¹ãƒˆçµæœãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.scheduleAutomatedReports = function() {
            try {
                log('â° è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®è¨­å®š...');
                
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ cron-like scheduler ã‚’è¨­å®š
                const interval = 24 * 60 * 60 * 1000; // 24æ™‚é–“
                
                setInterval(() => {
                    if (lastTestResults) {
                        const report = seoTester.exportResults(lastTestResults, 'html');
                        downloadReport(report, `automated-seo-report-${new Date().toISOString().split('T')[0]}.html`, 'html');
                        log('ğŸ“„ è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸ');
                    }
                }, interval);
                
                log('âœ… è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆãŒ24æ™‚é–“é–“éš”ã§è¨­å®šã•ã‚Œã¾ã—ãŸ');
                
            } catch (error) {
                log(`âŒ è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }
        };
        
        window.clearTestResults = function() {
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('overallScore').style.display = 'none';
            lastTestResults = null;
            log('ğŸ—‘ï¸ ãƒ†ã‚¹ãƒˆçµæœãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ');
        };
        
        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        
        function displayTestResults(results) {
            const container = document.getElementById('testResults');
            container.innerHTML = '';
            
            Object.entries(results.categories).forEach(([name, category]) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'test-category';
                
                const title = document.createElement('h3');
                title.textContent = `${category.category} (${category.passed}/${category.tests.length})`;
                categoryDiv.appendChild(title);
                
                category.tests.forEach(test => {
                    const testDiv = document.createElement('div');
                    testDiv.className = `test-item ${test.passed ? 'passed' : 'failed'}`;
                    testDiv.innerHTML = `<strong>${test.name}:</strong> ${test.message}`;
                    categoryDiv.appendChild(testDiv);
                });
                
                container.appendChild(categoryDiv);
            });
        }
        
        function displaySingleCategoryResult(results) {
            const container = document.getElementById('testResults');
            container.innerHTML = '';
            
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'test-category';
            
            const title = document.createElement('h3');
            title.textContent = `${results.category} (${results.passed}/${results.tests.length})`;
            categoryDiv.appendChild(title);
            
            results.tests.forEach(test => {
                const testDiv = document.createElement('div');
                testDiv.className = `test-item ${test.passed ? 'passed' : 'failed'}`;
                testDiv.innerHTML = `<strong>${test.name}:</strong> ${test.message}`;
                categoryDiv.appendChild(testDiv);
            });
            
            container.appendChild(categoryDiv);
        }
        
        function displayOverallScore(score, className) {
            const scoreElement = document.getElementById('overallScore');
            const scoreValue = scoreElement.querySelector('.score-value');
            
            scoreValue.textContent = typeof score === 'number' ? `${score}%` : score;
            scoreElement.className = `score-display ${className}`;
            scoreElement.style.display = 'block';
        }
        
        function displayLighthouseScores(scores) {
            const metrics = ['performance', 'accessibility', 'bestPractices', 'seo'];
            
            metrics.forEach(metric => {
                const score = scores[metric];
                const scoreElement = document.getElementById(`${metric}Score`);
                const progressElement = document.getElementById(`${metric}Progress`);
                
                if (scoreElement && progressElement) {
                    scoreElement.textContent = score;
                    progressElement.style.width = `${score}%`;
                    progressElement.className = `progress-fill ${getScoreClass(score)}`;
                }
            });
        }
        
        function displayCoreWebVitals(vitals) {
            document.getElementById('lcpValue').textContent = vitals.LCP.toFixed(1);
            document.getElementById('fidValue').textContent = vitals.FID.toFixed(1);
            document.getElementById('clsValue').textContent = vitals.CLS.toFixed(3);
        }
        
        function displayAlert(alert) {
            const alertsContainer = document.getElementById('activeAlerts');
            
            // æ—¢å­˜ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ã‚¯ãƒªã‚¢
            if (alertsContainer.children[0]?.textContent === 'ã‚¢ãƒ©ãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“') {
                alertsContainer.innerHTML = '';
            }
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-item ${alert.severity}`;
            alertDiv.innerHTML = `
                <strong>${alert.type}:</strong> ${alert.message}
                <br><small>${new Date(alert.timestamp).toLocaleString()}</small>
            `;
            
            alertsContainer.insertBefore(alertDiv, alertsContainer.firstChild);
            
            // æœ€å¤§10å€‹ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚’ä¿æŒ
            while (alertsContainer.children.length > 10) {
                alertsContainer.removeChild(alertsContainer.lastChild);
            }
        }
        
        function updateMonitoringStatus(status, text) {
            const statusElement = document.getElementById('monitoringStatus');
            statusElement.className = `monitoring-status ${status}`;
            statusElement.textContent = text;
        }
        
        function startMetricsUpdate() {
            const updateInterval = setInterval(() => {
                if (!monitoringActive) {
                    clearInterval(updateInterval);
                    return;
                }
                
                const stats = seoMonitor.getMonitoringStats();
                const data = seoMonitor.getMonitoringData();
                
                // ç¾åœ¨ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ›´æ–°
                if (data.lighthouse.length > 0) {
                    const latest = data.lighthouse[data.lighthouse.length - 1];
                    document.getElementById('currentLighthouse').textContent = `${latest.seo}/100`;
                }
                
                if (data.coreWebVitals.length > 0) {
                    const latest = data.coreWebVitals[data.coreWebVitals.length - 1];
                    document.getElementById('currentLCP').textContent = latest.LCP.toFixed(1);
                    document.getElementById('currentFID').textContent = latest.FID.toFixed(1);
                    document.getElementById('currentCLS').textContent = latest.CLS.toFixed(3);
                }
                
                document.getElementById('lastCheck').textContent = stats.lastCheck ? 
                    new Date(stats.lastCheck).toLocaleString() : '-';
                
            }, 5000); // 5ç§’é–“éš”ã§æ›´æ–°
        }
        
        function getScoreClass(score) {
            if (score >= 95) return 'excellent';
            if (score >= 85) return 'good';
            if (score >= 70) return 'needs-improvement';
            return 'poor';
        }
        
        function downloadReport(content, filename, format) {
            const mimeTypes = {
                html: 'text/html',
                json: 'application/json',
                csv: 'text/csv'
            };
            
            const blob = new Blob([content], { type: mimeTypes[format] });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function log(message, type = 'info') {
            const activeTab = document.querySelector('.tab.active').dataset.tab;
            const outputId = `${activeTab}Output`;
            const output = document.getElementById(outputId);
            
            const timestamp = new Date().toLocaleTimeString();
            const formattedMessage = `[${timestamp}] ${message}\n`;
            
            if (output.textContent.includes('çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...')) {
                output.textContent = '';
            }
            
            output.textContent += formattedMessage;
            output.scrollTop = output.scrollHeight;
            
            console.log(`[SEO Comprehensive Test] ${message}`);
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.addEventListener('DOMContentLoaded', function() {
            // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®æ›´æ–°
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });
        });
        
        // åˆæœŸåŒ–ã®å®Ÿè¡Œ
        initialize();
    </script>
</body>
</html>