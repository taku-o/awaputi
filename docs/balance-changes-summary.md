# ゲームバランス調整サマリー

## 概要

タスク28「ゲームバランス調整」の実装により、プレイヤーフィードバックに基づいてゲーム全体のバランスを大幅に改善しました。

## 主要な変更点

### 1. ステージ開放条件の緩和

**問題**: ステージ開放に必要なTAPが高すぎて、プレイヤーの進歩が遅い

**解決策**: 全ステージの開放条件を大幅に緩和

| ステージ | 変更前 | 変更後 | 削減率 |
|---------|--------|--------|--------|
| ちょっと硬いアワアワ | 1,000 | 500 | 50% |
| かなり硬いアワアワ | 5,000 | 2,000 | 60% |
| 特殊なアワアワ | 10,000 | 5,000 | 50% |
| 悪夢のアワアワ | 25,000 | 12,000 | 52% |
| カオスなアワアワ | 50,000 | 25,000 | 50% |
| 究極のアワアワ | 100,000 | 50,000 | 50% |
| 全部入りアワアワ | 200,000 | 100,000 | 50% |
| ボスアワアワ | 75,000 | 35,000 | 53% |

### 2. ステージ難易度の調整

**問題**: 高難易度ステージが厳しすぎてプレイヤーが挫折する

**解決策**: spawn rate と max bubbles を全体的に緩和

| ステージ | Spawn Rate | Max Bubbles |
|---------|------------|-------------|
| ちょっと硬いアワアワ | 1.8→1.6 | 25→22 |
| かなり硬いアワアワ | 2.0→1.8 | 30→28 |
| 特殊なアワアワ | 2.2→2.0 | 35→32 |
| 悪夢のアワアワ | 2.5→2.3 | 40→38 |
| カオスなアワアワ | 3.0→2.7 | 45→42 |
| 究極のアワアワ | 3.5→3.2 | 50→48 |
| 全部入りアワアワ | 4.0→3.6 | 60→55 |
| ボスアワアワ | 2.0→1.8 | 30→28 |

### 3. アイテムシステムの改善

**問題**: アイテムが高すぎて購入機会が少ない

**解決策**: 
- 基本コストを15-40%削減
- レベルアップコスト倍率を1.5倍→1.3倍に緩和
- 最大レベルを拡張
- 新アイテム「コンボ強化」を追加

| アイテム | 変更前コスト | 変更後コスト | 最大レベル |
|---------|-------------|-------------|-----------|
| スコア倍率アップ | 100 | 75 | 5 |
| 復活 | 200 | 150 | 1→2 |
| レア率アップ | 150 | 100 | 3→4 |
| HP増加 | 80 | 60 | 5→6 |
| 時間延長 | 120 | 90 | 3→4 |
| コンボ強化 | - | 80 | 3（新規） |
| リセット | 50 | 30 | 1 |

### 4. スコアシステムの最適化

**問題**: 基本スコアが低く、達成感が不足

**解決策**: 
- 全泡の基本スコアを15-30%向上
- コンボシステムを改善（5コンボごとにボーナス）
- コンボ最大倍率を3.0倍→2.5倍に調整（バランス改善）

| 泡の種類 | 変更前スコア | 変更後スコア | 向上率 |
|---------|-------------|-------------|--------|
| 普通の泡 | 10 | 15 | 50% |
| 石の泡 | 25 | 35 | 40% |
| 鉄の泡 | 50 | 65 | 30% |
| ダイヤの泡 | 100 | 120 | 20% |
| ボス泡 | 1000 | 800 | -20%* |

*ボス泡は耐久値も8に削減してバランス調整

### 5. 泡の特性調整

**問題**: 一部の泡が強すぎる/弱すぎる、ゲームテンポが速すぎる

**解決策**: 
- 全泡の生存時間を延長（プレイヤーに余裕を提供）
- 特殊効果を調整してバランス改善
- 硬い泡の耐久値を適正化

#### 主要な調整例:
- **ピンク泡**: 回復量 20→25、生存時間 8秒→10秒
- **毒泡**: ダメージ 10→8、生存時間 12秒→14秒
- **ダイヤ泡**: 耐久値 5→4、生存時間 25秒→22秒
- **ボス泡**: 耐久値 10→8、サイズ 100→90

### 6. 新機能の追加

**コンボ強化アイテム**:
- コンボ継続時間を1.5倍に延長
- レベルアップで効果が累積
- コスト80AP、最大レベル3

## 期待される効果

### プレイヤー体験の改善
1. **進歩感の向上**: ステージ開放が早くなり、達成感を得やすい
2. **購買意欲の向上**: アイテムが手頃な価格で購入しやすい
3. **スコア満足度**: 基本スコアが高くなり、達成感が向上
4. **ゲームテンポ**: 泡の生存時間延長で余裕のあるプレイが可能

### バランスの改善
1. **難易度カーブ**: より滑らかな難易度上昇
2. **リスク・リワード**: 各泡の特性がより明確に
3. **長期プレイ**: アイテムシステムの改善で継続プレイを促進

## 実装詳細

### 新規ファイル
- `src/config/GameBalance.js`: バランス設定の集約
- `tests/unit/GameBalance.test.js`: バランステスト
- `docs/balance-changes-summary.md`: この文書

### 変更ファイル
- `src/core/StageManager.js`: ステージ設定の調整
- `src/core/ItemSystem.js`: アイテムシステムの改善
- `src/managers/ScoreManager.js`: スコアシステムの最適化
- `src/bubbles/Bubble.js`: 泡の特性調整

## 今後の調整方針

### 監視指標
1. **プレイヤー進歩率**: ステージ開放の頻度
2. **アイテム購入率**: AP消費の頻度
3. **平均プレイ時間**: セッション継続時間
4. **スコア分布**: 達成スコアの統計

### 調整の方向性
1. **データ駆動**: プレイヤー行動データに基づく微調整
2. **段階的改善**: 大幅な変更ではなく、小さな調整を継続
3. **フィードバック重視**: プレイヤーの声を反映した改善

## 検証方法

### 自動テスト
- バランス設定の整合性チェック
- スコア計算の正確性検証
- アイテム効果の動作確認

### 手動テスト
- 各ステージの難易度体感
- アイテム購入フローの確認
- 長時間プレイでのバランス確認

## まとめ

今回のバランス調整により、プレイヤーがより楽しく、継続的にゲームを楽しめる環境を整備しました。特に初心者から中級者のプレイヤー体験を大幅に改善し、ゲームの長期的な魅力を向上させています。

今後もプレイヤーフィードバックを収集し、継続的なバランス改善を行っていく予定です。