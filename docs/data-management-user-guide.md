# データ管理機能 - ユーザーガイド

## はじめに

Bubble Pop Web Game のデータ管理機能へようこそ！この機能により、あなたのゲーム進行状況、設定、統計データを安全に保存・管理できます。また、デバイス間でのデータ移行やクラウド同期も可能です。

## 目次

1. [基本機能](#基本機能)
2. [データバックアップ](#データバックアップ)
3. [データエクスポート・インポート](#データエクスポート・インポート)
4. [クラウド同期](#クラウド同期)
5. [オフライン機能](#オフライン機能)
6. [データ復旧](#データ復旧)
7. [設定とカスタマイズ](#設定とカスタマイズ)
8. [トラブルシューティング](#トラブルシューティング)
9. [よくある質問 (FAQ)](#よくある質問-faq)

---

## 基本機能

### データの自動保存

Bubble Pop では、以下のデータが自動的に保存されます：

- **プレイヤーデータ**: 名前、最高スコア、現在のレベル、獲得実績
- **ゲーム設定**: 音量、難易度、言語設定、グラフィック設定
- **統計情報**: 総プレイ時間、泡を割った数、コンボ記録

### データの確認方法

1. メインメニューから **「ユーザー情報」** をクリック
2. **「データ管理」** タブを選択
3. 現在保存されているデータの概要が表示されます

![データ管理画面](images/data-management-overview.png)

---

## データバックアップ

### 自動バックアップ

システムは定期的（24時間ごと）に自動でバックアップを作成します。最新の10個のバックアップが保持されます。

### 手動バックアップの作成

大切な進行状況を手動でバックアップできます：

1. **ユーザー情報** → **データ管理** タブを開く
2. **「バックアップ作成」** ボタンをクリック
3. 確認ダイアログで **「はい」** を選択

![バックアップ作成](images/backup-creation.png)

### バックアップの確認

**「バックアップ履歴」** セクションで以下を確認できます：
- バックアップ作成日時
- データサイズ
- バックアップの種類（自動/手動）

---

## データエクスポート・インポート

### データエクスポート（デバイス間移行）

ゲームデータを他のデバイスに移行する場合：

1. **データ管理** タブで **「エクスポート」** をクリック
2. エクスポート形式を選択：
   - **標準JSON**: 通常の移行用
   - **暗号化**: セキュリティを重視する場合
3. **「エクスポート開始」** をクリック
4. ダウンロードされたファイルを保存

![データエクスポート](images/data-export.png)

### データインポート

新しいデバイスでゲームデータを復元する場合：

1. **データ管理** タブで **「インポート」** をクリック
2. **「ファイル選択」** でエクスポートしたファイルを選択
3. データの競合が検出された場合、解決方法を選択：
   - **上書き**: 新しいデータで置き換え
   - **マージ**: 両方のデータを統合
   - **スキップ**: 既存データを維持

![データインポート](images/data-import.png)

### 安全なデータ移行のコツ

✅ **推奨手順:**
1. 移行前に必ずバックアップを作成
2. エクスポートファイルを安全な場所に保存
3. 新しいデバイスでインポート前にテストプレイ
4. インポート後、データが正しく復元されたか確認

---

## クラウド同期

### クラウド同期とは

クラウド同期機能により、複数のデバイス間で自動的にゲームデータを同期できます。

> **注意**: クラウド同期は現在開発中の機能です。将来のアップデートで利用可能になります。

### 将来の機能（予定）

- **自動同期**: デバイス間での自動データ同期
- **競合解決**: 複数デバイスでプレイした場合の自動調整
- **履歴管理**: 同期履歴の確認と手動同期

---

## オフライン機能

### オフラインでのプレイ

インターネット接続がない環境でも、Bubble Pop を楽しめます：

- ゲームデータはローカルに保存されます
- オフライン中の操作は記録されます
- インターネット復帰時に自動で同期されます

### オフライン状態の確認

画面右上の接続状況アイコンで確認できます：
- 🟢 **緑**: オンライン・良好な接続
- 🟡 **黄**: オンライン・接続不安定  
- 🔴 **赤**: オフライン

### オフライン操作の管理

**データ管理** → **「オフライン状態」** で以下を確認：
- 現在の接続状況
- キューされた操作数
- 最後の同期時刻

---

## データ復旧

### 自動復旧機能

データの破損が検出された場合、システムが自動で復旧を試みます：

1. **破損検出**: ゲーム起動時に自動チェック
2. **自動復旧**: 最新のバックアップから自動復元
3. **復旧通知**: 成功・失敗の結果を表示

### 手動復旧

自動復旧に失敗した場合の手動操作：

1. **データ管理** → **「データ復旧」** をクリック
2. 復旧方法を選択：
   - **最新バックアップから復旧**
   - **特定のバックアップを選択**
   - **工場出荷時状態に戻す**（最終手段）

![データ復旧](images/data-recovery.png)

### 復旧後の確認事項

✅ **チェックリスト:**
- [ ] プレイヤー名が正しい
- [ ] スコアと実績が復旧されている
- [ ] ゲーム設定が適用されている
- [ ] 統計データが表示される

---

## 設定とカスタマイズ

### データ管理設定

**設定** → **「データ管理」** で以下をカスタマイズできます：

#### 自動バックアップ設定
- **有効/無効**: 自動バックアップの切り替え
- **間隔**: 6時間、12時間、24時間から選択
- **保持数**: 5個、10個、20個から選択

#### データ検証設定
- **起動時チェック**: ゲーム開始時のデータ検証
- **保存時チェック**: データ保存時の整合性確認
- **詳細ログ**: 検証結果の詳細表示

#### プライバシー設定
- **データ暗号化**: ローカルデータの暗号化
- **統計収集**: 匿名使用統計の送信許可
- **エラー報告**: 自動エラー報告の有効化

![設定画面](images/settings-data-management.png)

---

## トラブルシューティング

### よくある問題と解決方法

#### 問題: ゲームデータが消えた

**解決手順:**
1. **データ復旧** → **「最新バックアップから復旧」** を試す
2. **バックアップ履歴** で利用可能なバックアップを確認
3. それでも解決しない場合は **「データ検証」** を実行

#### 問題: エクスポートファイルが開けない

**解決手順:**
1. ファイルが破損していないか確認
2. ファイルサイズが0でないことを確認
3. 別のブラウザでインポートを試す
4. **「データ検証」** でファイルの整合性をチェック

#### 問題: バックアップ作成に失敗する

**解決手順:**
1. ブラウザのストレージ容量を確認
2. 不要なデータを削除してスペースを確保
3. ブラウザを再起動して再試行
4. **設定** → **「ストレージクリア」** で一時ファイルを削除

#### 問題: 動作が遅い・フリーズする

**解決手順:**
1. **設定** → **「パフォーマンス」** で軽量モードを有効化
2. **データ管理** → **「キャッシュクリア」** を実行
3. ブラウザのタブを閉じて再起動
4. 大量のバックアップがある場合は古いものを削除

### エラーメッセージの意味

| エラーメッセージ | 原因 | 対処法 |
|---|---|---|
| "ストレージ容量不足" | ブラウザの保存領域が満杯 | 不要なデータを削除 |
| "データ検証失敗" | ファイルが破損している | バックアップから復旧 |
| "ネットワークエラー" | インターネット接続の問題 | 接続を確認して再試行 |
| "認証エラー" | クラウド認証に失敗 | ログイン情報を確認 |

### サポートへの問い合わせ

解決しない問題がある場合：

1. **設定** → **「診断情報」** から情報をコピー
2. 問題の詳細を記録（いつ・何をしていた時・エラーメッセージ）
3. スクリーンショットを撮影
4. サポートチームに連絡（support@bubblepop.example.com）

---

## よくある質問 (FAQ)

### Q: データはどこに保存されますか？
**A:** ゲームデータは主にブラウザのローカルストレージに保存されます。バックアップはブラウザの IndexedDB に保存され、エクスポート時にはダウンロードフォルダに保存されます。

### Q: ブラウザを変更した場合、データは移行されますか？
**A:** いいえ、自動では移行されません。ブラウザを変更する前に **エクスポート機能** でデータを保存し、新しいブラウザで **インポート** してください。

### Q: 誤ってデータを削除した場合、復旧できますか？
**A:** はい、自動バックアップまたは手動バックアップがあれば復旧可能です。**データ復旧** 機能を使用してください。

### Q: バックアップはどのくらいの容量を使用しますか？
**A:** プレイヤーデータのバックアップは通常数KB〜数MBです。ゲームの進行度により異なりますが、ブラウザのストレージ制限内で管理されます。

### Q: プライベートブラウザモードでプレイできますか？
**A:** 技術的には可能ですが、プライベートモードではデータが永続保存されないため推奨しません。通常モードでのプレイを推奨します。

### Q: 複数のアカウントでプレイできますか？
**A:** 現在は1つのブラウザにつき1つのプレイヤーデータのみサポートしています。複数アカウントを使いたい場合は、異なるブラウザまたはブラウザプロファイルを使用してください。

### Q: データのセキュリティは大丈夫ですか？
**A:** はい、データは暗号化して保存され、改ざん検出機能も含まれています。ただし、重要なデータは定期的にエクスポートして別途保存することを推奨します。

### Q: ゲームをアンインストールするとデータも消えますか？
**A:** ブラウザゲームなので「アンインストール」の概念はありませんが、ブラウザのデータ削除や初期化を行うとゲームデータも削除されます。重要なデータは事前にエクスポートしてください。

### Q: スマートフォンとPCでデータを共有できますか？
**A:** 現在はエクスポート・インポート機能でデータ移行が可能です。将来のアップデートではクラウド同期機能により自動同期が可能になる予定です。

### Q: ゲームの更新時にデータは保持されますか？
**A:** はい、ゲームの更新時もプレイヤーデータは保持されます。ただし、大幅な仕様変更時には自動でデータ形式の変換が行われる場合があります。

---

## 最後に

データ管理機能を活用して、安心してBubble Popをお楽しみください！

**重要なポイント:**
- 定期的なバックアップの作成
- デバイス変更前のデータエクスポート
- トラブル時の冷静な対処

何かご不明な点がございましたら、ゲーム内の **「ヘルプ」** ボタンまたはサポートチームまでお気軽にお問い合わせください。

---

*このガイドは Bubble Pop Web Game バージョン 2.1.0 に基づいています。*  
*最終更新: 2025年1月*