# 実装計画

## Phase 1: コア機能実装

- [ ] 1. プロジェクト基盤セットアップ
  - Vite プロジェクトの初期化とビルド設定
  - HTML5 Canvas の基本セットアップ
  - ES6+ モジュール構造の構築
  - 開発環境の設定（ESLint, Prettier）
  - _要件: 11.1, 11.4_

- [ ] 2. ゲームエンジンコアの実装
  - GameEngine クラスの基本構造実装
  - ゲームループ（update/render）の実装
  - requestAnimationFrame による60FPS制御
  - deltaTime 計算とフレーム管理
  - _要件: 12.1, 12.2_

- [ ] 3. 基本的な入力システム実装
  - InputManager クラスの実装
  - マウスクリック・タッチイベントの統一処理
  - Canvas座標系への変換処理
  - 入力イベントのデバウンス処理
  - _要件: 1.1, 1.2, 11.2, 11.4_

- [ ] 4. 基本泡クラスの実装
  - Bubble 基底クラスの実装
  - 泡の基本プロパティ（位置、サイズ、耐久値）
  - 泡の描画メソッド実装
  - 泡の更新ロジック（年齢管理、移動）
  - _要件: 2.1, 5.1_

- [ ] 5. 泡の生成・管理システム
  - BubbleManager クラスの実装
  - 泡の生成・削除・更新処理
  - 泡とマウス/タッチ位置の衝突判定
  - 基本的な泡の種類（普通の泡）の実装
  - _要件: 1.1, 2.1, 2.2_

## Phase 2: ゲームプレイ機能

- [ ] 6. スコアシステムの実装
  - ScoreManager クラスの実装
  - 基本スコア計算ロジック
  - 時間経過によるスコア変動システム
  - スコア表示UI の実装
  - _要件: 4.1, 4.2, 4.3, 6.1_

- [ ] 7. コンボシステムの実装
  - 連続撃破カウンター
  - コンボボーナス計算
  - コンボ表示UI
  - コンボリセット条件の実装
  - _要件: 4.4, 4.5, 6.3_

- [ ] 8. HPシステムとゲームオーバー処理
  - PlayerData クラスのHP管理機能
  - ダメージ処理とHP表示
  - ゲームオーバー判定（HP0、時間切れ）
  - ゲームオーバー画面の実装
  - _要件: 3.1, 3.2, 3.3, 3.4, 6.5_

- [ ] 9. 特殊泡の種類実装（基本セット）
  - 硬い泡（石、鉄、ダイヤモンド）の実装
  - 複数回クリック処理
  - ピンクの泡（HP回復）の実装
  - 毒の泡（ダメージ）の実装
  - _要件: 1.4, 3.5, 5.1, 5.2, 5.7_

- [ ] 10. 特殊泡の種類実装（効果セット）
  - とげとげの泡（連鎖破壊）の実装
  - 虹色の泡（ボーナスタイム）の実装
  - 時計の泡（時間停止効果）の実装
  - S字の泡（追加スコア）の実装
  - _要件: 5.3, 5.4, 5.5_

- [ ] 11. 特殊泡の種類実装（挙動セット）
  - ビリビリの泡（画面揺れ・操作不能）の実装
  - 逃げる泡の実装
  - ひび割れの泡（早期破裂）の実装
  - ボス泡（大型・高耐久）の実装
  - _要件: 5.6, 5.8_

- [ ] 12. ドラッグ操作と泡の吹き飛ばし
  - ドラッグ検出とベクトル計算
  - 泡の物理的移動処理
  - 画面端での跳ね返り処理
  - 特定泡の画面外消滅処理
  - _要件: 1.5, 2.5_

## Phase 3: ステージ・進歩システム

- [ ] 13. ステージシステムの基盤実装
  - Stage Configuration の定義
  - ステージ選択画面の実装
  - ステージ固有の泡出現ロジック
  - ステージ開放条件の管理
  - _要件: 7.1, 7.2, 7.3_

- [ ] 14. 全ステージタイプの実装
  - 1分ステージ（チュートリアル）
  - 普通のアワアワ〜全部入りアワアワまで9種類
  - ボスアワアワの特別処理
  - ステージ別の難易度調整
  - _要件: 7.4, 7.5_

- [ ] 15. 永続データシステムの実装
  - PlayerData クラスの完全実装
  - LocalStorage による データ保存・読み込み
  - AP/TAP の計算・蓄積処理
  - ハイスコア記録システム
  - _要件: 8.1, 8.2, 11.5_

- [ ] 16. アイテムシステムの実装
  - アイテム定義とデータ構造
  - アイテムショップ画面の実装
  - アイテム購入・所持状態管理
  - アイテム効果の適用システム
  - _要件: 8.3, 8.4, 9.1, 9.2, 9.3, 9.4, 9.5_

## Phase 4: UI・UX・メニューシステム

- [ ] 17. メインメニューシステムの実装
  - Scene Manager の完全実装
  - メインメニュー画面
  - ゲーム画面との遷移処理
  - ユーザー名登録・変更機能
  - _要件: 10.1, 10.3_

- [ ] 18. ユーザー情報管理画面の実装
  - ユーザー情報表示画面
  - スコア確認画面（ステージ別ハイスコア）
  - データクリア機能
  - 設定画面の基本実装
  - _要件: 10.2, 10.4, 10.5_

- [ ] 19. ゲーム中UIの完成
  - リアルタイムスコア・HP・時間表示
  - ギブアップボタンの実装
  - 特殊効果の視覚的表示
  - ポーズ機能の実装
  - _要件: 6.1, 6.2, 6.4_

- [ ] 20. 視覚・音響効果の実装
  - Web Audio API による効果音システム
  - 泡が割れる時のパーティクル効果
  - 画面揺れ・フラッシュ効果
  - BGM システムの実装
  - _要件: 1.3, 5.6_

## Phase 5: 最適化・テスト・デプロイ

- [ ] 21. パフォーマンス最適化の実装
  - オブジェクトプーリングシステム
  - 差分レンダリングの実装
  - メモリリーク対策
  - 60FPS維持の最適化
  - _要件: 12.1, 12.3_

- [ ] 22. クロスブラウザ・デバイス対応
  - レスポンシブデザインの実装
  - タッチデバイス最適化
  - 各ブラウザでの動作確認・修正
  - フォールバック処理の実装
  - _要件: 11.1, 11.2, 11.3, 11.4_

- [ ] 23. エラーハンドリングと安定性向上
  - ErrorHandler クラスの実装
  - グレースフルデグラデーション
  - 入力値検証の強化
  - 異常状態からの復旧処理
  - _要件: 12.4_

- [ ] 24. テストスイートの実装
  - Jest による単体テストの作成
  - 主要機能の統合テスト
  - E2E テストシナリオの実装
  - パフォーマンステストの自動化
  - _要件: 12.1, 12.2, 12.3_

- [ ] 25. ビルド・デプロイ設定
  - Vite ビルド設定の最適化
  - アセット最適化（画像圧縮、コード分割）
  - デプロイメント自動化
  - 監視・分析ツールの設定
  - _要件: 11.1, 12.5_