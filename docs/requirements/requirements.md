# バブルポップゲーム - 要件定義書

## はじめに

Webブラウザ上で動作する泡割りゲーム「BubblePop」の要件を定義します。画面に浮き上がる泡をクリック・タップして割り、スコアを稼ぐアクションゲームです。

## 要件

### 要件1: ゲーム基本操作

**ユーザーストーリー:** プレイヤーとして、画面上の泡をクリック・タップして割ることで、スコアを獲得したい

#### 受入基準
1. WHEN プレイヤーが泡をクリック・タップ THEN その泡が割れてスコアが加算される
2. WHEN プレイヤーが空の領域をクリック・タップ THEN 何も起こらない
3. WHEN 泡が割れる THEN 視覚的・音響的フィードバックが提供される
4. WHEN 硬い泡（石・鉄・ダイヤモンド）をクリック THEN 必要回数クリックするまで割れない
5. WHEN プレイヤーがドラッグ操作を行う THEN 泡が吹き飛ばされる

### 要件2: 泡の出現・消滅システム

**ユーザーストーリー:** プレイヤーとして、時間経過とともに様々な種類の泡が出現し、放置すると危険になるシステムを体験したい

#### 受入基準
1. WHEN ゲームが開始される THEN 泡がランダムな位置に出現し始める
2. WHEN 時間が経過する THEN 泡の出現頻度が徐々に増加する
3. WHEN 泡が一定時間放置される THEN プレイヤーがダメージを受ける
4. WHEN 泡がさらに長時間放置される THEN 泡が自動で破裂し大ダメージを受ける
5. WHEN 特定の泡（虹色・ピンク・時計・S字・ビリビリ・毒）がドラッグされる THEN 画面外に出て消滅する

### 要件3: HPとゲームオーバーシステム

**ユーザーストーリー:** プレイヤーとして、HPを管理しながらゲームを続け、HPが0になるかタイムアップでゲームオーバーになるシステムを体験したい

#### 受入基準
1. WHEN ゲームが開始される THEN HPが満タン状態で表示される
2. WHEN プレイヤーがダメージを受ける THEN HPが減少し画面に表示される
3. WHEN HPが0になる THEN ゲームオーバーになる
4. WHEN 5分が経過する THEN ゲームオーバーになる
5. WHEN ピンクの泡を割る THEN HPが回復する

### 要件4: スコアシステム

**ユーザーストーリー:** プレイヤーとして、泡を割ることでスコアを獲得し、コンボや特殊効果でより高いスコアを目指したい

#### 受入基準
1. WHEN 泡を割る THEN 泡の種類に応じたスコアが加算される
2. WHEN 泡を発生直後に割る THEN 高いスコアが獲得できる
3. WHEN 泡を破裂直前に割る THEN 最高スコアが獲得できる
4. WHEN 連続で泡を割る THEN コンボボーナスが発生する
5. WHEN 特定の連続撃破数に達する THEN 大きなボーナススコアが加算される

### 要件5: 泡の種類と特殊効果

**ユーザーストーリー:** プレイヤーとして、様々な種類の泡とその特殊効果を体験し、戦略的なゲームプレイを楽しみたい

#### 受入基準
1. WHEN 普通の泡を割る THEN 基本スコアが獲得できる
2. WHEN 硬い泡（石・鉄・ダイヤモンド）を割る THEN 高いスコアが獲得できる
3. WHEN とげとげの泡を割る THEN 周囲にトゲが飛び散り他の泡も割れる
4. WHEN 虹色の泡を割る THEN ボーナスタイムに入る
5. WHEN 時計の泡を割る THEN 一時的に時が止まる演出が発生する
6. WHEN ビリビリの泡を割る THEN 画面が揺れ一時的に操作不能になる
7. WHEN 毒の泡を割る THEN HPにダメージを受ける
8. WHEN 逃げる泡に近づく THEN 泡が逃げる動作をする

### 要件6: ゲーム画面とUI

**ユーザーストーリー:** プレイヤーとして、ゲーム状況を把握しやすく、直感的に操作できるUIを使いたい

#### 受入基準
1. WHEN ゲーム中 THEN 現在のスコア、残り時間、HPが常に表示される
2. WHEN ゲーム中 THEN ギブアップボタンが表示される
3. WHEN コンボが発生する THEN コンボ数が画面に表示される
4. WHEN 特殊効果が発動する THEN 効果の内容が視覚的に表示される
5. WHEN ゲームオーバー THEN 最終スコアが大きく表示される

### 要件7: ステージシステム

**ユーザーストーリー:** プレイヤーとして、様々な特徴を持つステージを選択してプレイしたい

#### 受入基準
1. WHEN ゲーム開始時 THEN 1分ステージと普通のアワアワが選択可能である
2. WHEN 特定条件を満たす THEN 新しいステージが開放される
3. WHEN ステージを選択する THEN そのステージ固有の泡の種類が出現する
4. WHEN ボスアワアワステージ THEN 中盤と最後にボス泡が出現する
5. WHEN 全部入りアワアワステージ THEN 全ての種類の泡が出現する

### 要件8: 永続的な進歩システム

**ユーザーストーリー:** プレイヤーとして、ゲームを続けることで永続的な進歩を感じ、アイテムを購入して強化したい

#### 受入基準
1. WHEN ゲームオーバー THEN スコアがAP（泡潰しポイント）に加算される
2. WHEN ゲームオーバー THEN スコアがTAP（トータル泡潰しポイント）に加算される
3. WHEN APを消費する THEN アイテムを購入できる
4. WHEN アイテムを購入する THEN そのアイテムの効果が永続的に有効になる
5. WHEN TAPが一定値に達する THEN 新しいステージが開放される

### 要件9: アイテムシステム

**ユーザーストーリー:** プレイヤーとして、APを使ってアイテムを購入し、ゲームプレイを有利にしたい

#### 受入基準
1. WHEN アイテムショップにアクセス THEN 購入可能なアイテム一覧が表示される
2. WHEN スコア倍率アップアイテムを所持 THEN 獲得スコアが倍率分増加する
3. WHEN 復活アイテムを所持 THEN HP全損時に一度だけ満タンで復活する
4. WHEN レア率アップアイテムを所持 THEN レア泡の出現率が上昇する
5. WHEN アイテム効果リセットを購入 THEN 全アイテム効果がリセットされ再購入可能になる

### 要件10: ユーザー管理システム

**ユーザーストーリー:** プレイヤーとして、自分の進歩状況を確認し、ユーザー情報を管理したい

#### 受入基準
1. WHEN 初回アクセス THEN ユーザー名登録画面が表示される
2. WHEN ユーザー情報画面にアクセス THEN 現在のTAP、所持AP、ユーザー名が表示される
3. WHEN ユーザー名変更ボタンをクリック THEN ユーザー名を変更できる
4. WHEN スコア確認画面にアクセス THEN ステージ毎のハイスコアが表示される
5. WHEN データクリアボタンをクリック THEN 全データがリセットされる

### 要件11: Webブラウザ対応

**ユーザーストーリー:** プレイヤーとして、様々なWebブラウザやデバイスでゲームを楽しみたい

#### 受入基準
1. WHEN Chrome、Firefox、Safari、Edgeでアクセス THEN ゲームが正常に動作する
2. WHEN スマートフォンでアクセス THEN タッチ操作でゲームがプレイできる
3. WHEN タブレットでアクセス THEN 画面サイズに応じて適切に表示される
4. WHEN PCでアクセス THEN マウス操作でゲームがプレイできる
5. WHEN ブラウザを閉じて再開 THEN 進歩状況が保存されている

### 要件12: パフォーマンスと応答性

**ユーザーストーリー:** プレイヤーとして、滑らかで応答性の高いゲーム体験を得たい

#### 受入基準
1. WHEN 大量の泡が画面に表示される THEN 60FPSを維持する
2. WHEN 泡をクリック・タップ THEN 100ms以内に反応する
3. WHEN ゲームを30分以上プレイ THEN メモリリークが発生しない
4. WHEN 低スペックデバイス THEN 設定を下げて動作する
5. WHEN ネットワーク接続なし THEN オフラインでもプレイできる