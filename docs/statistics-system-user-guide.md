# 統計システム ユーザーガイド

## 統計システムについて

awaputi統計システムは、あなたのゲームプレイを詳細に分析し、上達をサポートする包括的な機能です。20種類以上の統計項目、時系列分析、データ可視化により、プレイスタイルの把握と改善点の発見を支援します。

## 統計画面の使い方

### 統計画面へのアクセス

1. メインメニューから「ユーザー情報」を選択
2. 統計タブをクリック
3. デバッグモード時は `Ctrl+Shift+S` でも直接アクセス可能

### 統計画面の構成

#### 1. サマリーセクション
- **ゲーム数**: 総プレイ回数
- **総プレイ時間**: 累計プレイ時間
- **最高スコア**: 過去最高記録
- **平均スコア**: 最近の平均スコア
- **総獲得AP**: 累計獲得APポイント

#### 2. 詳細統計セクション
- **精度統計**: 泡の破裂成功率、種類別精度
- **効率統計**: 時間あたりスコア、AP効率
- **反応時間**: 平均反応時間、改善トレンド
- **プレイスタイル**: 積極性、集中力指標

#### 3. グラフ表示セクション
- **スコア推移**: 時系列でのスコア変化
- **泡タイプ別統計**: 各泡タイプの処理状況
- **コンボ分析**: コンボ継続能力の分析
- **ステージ別パフォーマンス**: ステージごとの成績

## 期間フィルター機能

### 利用可能な期間設定

- **今日**: 当日のデータ
- **今週**: 当週（月曜日起算）のデータ
- **今月**: 当月のデータ
- **過去7日間**: 直近7日間のデータ
- **過去30日間**: 直近30日間のデータ
- **全期間**: 全てのデータ
- **カスタム期間**: 任意の開始日・終了日を指定

### 期間フィルターの使い方

1. 統計画面上部の期間選択ドロップダウンをクリック
2. 希望の期間を選択
3. 「カスタム期間」選択時は、カレンダーから日付を選択
4. 「適用」ボタンで期間フィルターを適用

## グラフ機能

### グラフの種類

#### 棒グラフ
- **用途**: 泡タイプ別統計、ステージ別スコア比較
- **特徴**: カテゴリ別の数値比較に適している
- **操作**: バーにマウスオーバーで詳細表示

#### 線グラフ
- **用途**: スコア推移、精度の変化、プレイ時間推移
- **特徴**: 時系列でのトレンド把握に適している
- **操作**: データポイントクリックで詳細情報表示

#### 円グラフ
- **用途**: 泡タイプ別割合、スコア源泉分析
- **特徴**: 全体に占める割合の視覚化
- **操作**: セクションクリックで該当データの詳細表示

### グラフの操作方法

#### マウス操作
- **ホバー**: データポイントの詳細情報表示
- **クリック**: データの詳細ビュー表示
- **ズーム**: マウスホイールで拡大・縮小（線グラフ）
- **パン**: ドラッグで表示範囲移動（線グラフ）

#### キーボード操作
- **Tab**: グラフ間の移動
- **Enter**: 選択中のデータ詳細表示
- **矢印キー**: データポイント間の移動
- **+/-**: ズームイン・ズームアウト

### レスポンシブ表示

グラフは画面サイズに応じて自動調整されます：

- **スマートフォン**: 縦向きレイアウト、大きなタッチ操作エリア
- **タブレット**: 2列レイアウト、スワイプ操作対応
- **デスクトップ**: 3-4列レイアウト、マウス操作最適化

## 統計分析機能

### トレンド分析

#### スコアトレンド
- **向上率**: 日/週/月あたりのスコア向上度
- **予測**: 30日後の予想スコア
- **信頼度**: 分析結果の信頼度指標

#### 精度トレンド  
- **改善度**: 泡破裂精度の改善状況
- **安定性**: 精度の安定性指標
- **傾向**: 向上・横ばい・下降の判定

#### 効率トレンド
- **時間効率**: 単位時間あたりのスコア効率
- **AP効率**: 時間あたりのAP獲得効率
- **改善提案**: 効率向上のアドバイス

### 比較分析

#### 期間比較
- **今週 vs 先週**: 直近の変化を把握
- **今月 vs 先月**: 月次レベルでのパフォーマンス比較
- **カスタム比較**: 任意の期間同士の比較

#### 結果の見方
- **変化率**: パーセンテージでの変化表示
- **統計的有意性**: 変化が偶然か実力向上かの判定
- **重要度**: 各指標の重要度ランキング

### 洞察とアドバイス

#### 自動生成される洞察
- **強み分析**: 優れているポイントの特定
- **改善ポイント**: 成長の余地がある領域
- **推奨アクション**: 具体的な改善提案
- **マイルストーン**: 重要な成長節目の記録

#### 洞察の活用方法
1. **強みの活用**: 得意分野を活かした戦略を立てる
2. **弱点の改善**: 苦手分野の練習に集中する
3. **目標設定**: 推奨アクションを基に次の目標を決める
4. **進捗確認**: マイルストーンで成長を実感する

## データエクスポート・インポート

### エクスポート機能

#### 対応形式
- **JSON**: 完全なデータ構造の保持
- **CSV**: Excel等での分析用
- **テキスト**: 人間が読みやすい形式

#### エクスポート手順
1. 統計画面の「エクスポート」ボタンをクリック
2. エクスポート形式を選択
3. エクスポート期間を指定（オプション）
4. 「エクスポート実行」でファイルダウンロード

#### エクスポートオプション
- **時系列データ含む**: 詳細な時系列データも含める
- **メタデータ含む**: エクスポート日時等の情報も含める
- **個人情報の匿名化**: ユーザー名等を匿名化
- **データ圧縮**: ファイルサイズを削減

### インポート機能

#### インポート対応形式
- **JSON**: 完全復元が可能
- **CSV**: 基本統計データのみ
- **自動判定**: ファイル形式の自動識別

#### インポート手順
1. 統計画面の「インポート」ボタンをクリック
2. ファイル選択ダイアログからファイルを選択
3. インポート設定を確認
4. 「インポート実行」でデータ取り込み

#### インポート設定
- **マージ戦略**: 追加・置換・統合から選択
- **競合解決**: 既存データとの競合時の処理方法
- **バックアップ**: インポート前の自動バックアップ
- **検証**: データ整合性の事前チェック

### データバックアップ

#### 自動バックアップ
- **タイミング**: ゲーム終了時、データ更新時
- **保存数**: 最新5世代を自動保持
- **場所**: ブラウザのLocalStorage内

#### 手動バックアップ
1. 統計画面の「バックアップ作成」ボタンをクリック
2. バックアップ名を入力（オプション）
3. 「作成」でバックアップ保存

#### 復元機能
1. 「バックアップ管理」からバックアップ一覧を表示
2. 復元したいバックアップを選択
3. 「復元」で選択したデータに戻す

## アクセシビリティ機能

### スクリーンリーダー対応

#### 対応機能
- **ARIA属性**: 適切な意味情報の提供
- **代替テキスト**: グラフの内容説明
- **読み上げ順序**: 論理的な情報順序
- **ライブリージョン**: 動的更新の通知

#### 音声読み上げ内容
- **統計数値**: 「総ゲーム数：○○回」
- **グラフデータ**: 「棒グラフ：Normal泡800個、Stone泡200個...」
- **トレンド**: 「スコア推移：向上傾向、改善率15%」
- **洞察**: 「強み：Rainbow泡の処理精度が95%と優秀」

### キーボードナビゲーション

#### 基本操作
- **Tab**: フォーカス移動（前進）
- **Shift+Tab**: フォーカス移動（後退）
- **Enter**: 選択・実行
- **Space**: チェックボックス等の切り替え
- **Escape**: ダイアログ・メニューの閉じる

#### 統計画面専用ショートカット
- **G**: グラフセクションへ移動
- **S**: 統計セクションへ移動
- **F**: フィルターセクションへ移動
- **E**: エクスポートメニューを開く
- **1-9**: 対応するグラフへ直接移動

### 視覚的アクセシビリティ

#### ハイコントラストモード
- **有効化**: 設定メニューから「ハイコントラスト」を選択
- **色変更**: 背景を濃紺、文字を白に変更
- **グラフ**: より明確な色分けと境界線

#### 大文字フォント対応
- **設定方法**: 設定メニューで「大きな文字」を選択
- **変更範囲**: 統計数値、ラベル、説明文
- **倍率**: 標準の1.2倍〜2.0倍まで対応

#### 色覚サポート
- **色以外の情報**: パターン、形状での区別
- **色選択**: 色覚に配慮した色パレット
- **代替表示**: 色名テキストの併記

## トラブルシューティング

### よくある問題と解決方法

#### 統計データが表示されない
**症状**: 統計画面が空白、または「データなし」と表示される
**原因**: データ収集が開始されていない、またはデータが破損
**解決方法**:
1. 最低1回ゲームをプレイする
2. ブラウザを再読み込みする
3. LocalStorageの容量を確認する

#### グラフが正しく表示されない
**症状**: グラフが崩れている、または表示されない
**原因**: Canvas要素の問題、または描画エラー
**解決方法**:
1. ページを再読み込みする
2. ブラウザの開発者ツールでエラーを確認
3. ハードウェアアクセラレーションを無効にする

#### エクスポートファイルが開けない
**症状**: ダウンロードしたファイルが破損している
**原因**: エクスポート処理中のエラー
**解決方法**:
1. 異なる形式（JSON→CSV）で再試行
2. 期間を短くして再エクスポート
3. ブラウザのダウンロード設定を確認

#### インポートが失敗する
**症状**: 「インポートに失敗しました」エラー
**原因**: ファイル形式の不一致、データ破損
**解決方法**:
1. ファイル形式が正しいか確認
2. ファイルサイズが適切か確認（<10MB）
3. 別のファイルで試す

### エラーからの復旧

#### データ破損時の対応
1. **自動復旧**: システムが自動的に最新のバックアップから復旧を試行
2. **手動復旧**: バックアップ一覧から任意の時点に復旧
3. **初期化**: 全データを削除して最初から開始

#### ストレージ容量不足
1. **自動圧縮**: 古いデータの自動圧縮実行
2. **データ削除**: 不要な期間のデータを手動削除
3. **エクスポート**: データをファイルに保存後、ブラウザから削除

### パフォーマンス改善

#### 表示が重い場合
1. **期間短縮**: 表示期間を短くする（全期間→過去30日間）
2. **グラフ無効化**: 一時的にグラフ表示を無効にする
3. **ブラウザ再起動**: メモリをクリアして動作改善

#### データ処理が遅い場合
1. **バッチ処理**: データ更新を一括処理に切り替え
2. **自動更新停止**: リアルタイム更新を一時停止
3. **データアーカイブ**: 古いデータをアーカイブに移動

## セキュリティとプライバシー

### データの保存場所
- **ローカル保存**: 全データはブラウザのLocalStorageに保存
- **外部送信なし**: データが外部サーバーに送信されることはありません
- **プライバシー保護**: 個人を特定できる情報は収集していません

### データの匿名化
- **エクスポート時**: 必要に応じてユーザー名等を匿名化
- **共有機能**: 将来的に実装予定の共有機能では自動匿名化
- **分析用途**: 統計分析は匿名化されたデータのみ使用

### データの削除
- **個別削除**: 特定期間のデータのみ削除可能
- **完全削除**: 全統計データの完全消去が可能
- **復旧不可**: 削除されたデータは復旧できません（要注意）

## 今後のアップデート予定

### 短期的な改善（次回アップデート）
- **リアルタイム更新**: ゲーム中の統計リアルタイム表示
- **比較機能強化**: 他プレイヤー（匿名）との比較
- **新グラフ**: ヒートマップ、レーダーチャート追加
- **モバイル最適化**: スマートフォン表示の改善

### 中期的な機能追加
- **機械学習**: AIによるプレイスタイル分析
- **目標設定**: 個人目標の設定と進捗追跡
- **詳細分析**: より高度な統計分析アルゴリズム
- **カスタムダッシュボード**: ユーザー独自の表示設定

### 長期的な展望
- **クラウド同期**: 複数デバイス間でのデータ同期
- **コミュニティ機能**: プレイヤー間の統計共有
- **プロフェッショナル分析**: 上級者向けの詳細分析機能
- **APIアクセス**: 外部ツールからのデータアクセス

---

このユーザーガイドは統計システムv1.0に基づいています。機能の詳細や最新の変更については、ゲーム内のヘルプメニューもご参照ください。

ご質問やフィードバックがございましたら、ゲーム内の「フィードバック」機能をご利用ください。皆様のご意見は今後の改善に活用させていただきます。