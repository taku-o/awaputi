<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Favicon ICO Generator - BubblePop PWA</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 20px; border-radius: 10px; margin: 10px 0; }
        button { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #45a049; }
        .preview { display: flex; gap: 20px; margin: 20px 0; }
        .icon-preview { text-align: center; }
        .icon-preview img { border: 1px solid #ddd; background: white; }
        input[type="file"] { margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ğŸ”— Favicon ICO Generator</h1>
    <p>ç”Ÿæˆã•ã‚ŒãŸPNGãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ICOãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™</p>
    
    <div class="container">
        <h2>Step 1: PNGãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</h2>
        <p>favicon-16x16.png, favicon-32x32.png, favicon-48x48.png ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
        <input type="file" id="fileInput" multiple accept=".png" />
    </div>
    
    <div class="container">
        <h2>Step 2: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
        <div id="preview" class="preview"></div>
    </div>
    
    <div class="container">
        <h2>Step 3: ICOç”Ÿæˆã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2>
        <button id="generateICO">ICOãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
        <p><small>âš ï¸ æ³¨æ„: ã“ã®æ©Ÿèƒ½ã¯åŸºæœ¬çš„ãªICOç”Ÿæˆã§ã™ã€‚å®Œå…¨ãªäº’æ›æ€§ã«ã¯<a href="https://favicon.io/favicon-converter/" target="_blank">favicon.io</a>ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</small></p>
    </div>
    
    <div class="container">
        <h2>æ¨å¥¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«</h2>
        <ul>
            <li><a href="https://favicon.io/favicon-converter/" target="_blank">favicon.io - Favicon Converter</a></li>
            <li><a href="https://icoconvert.com/" target="_blank">icoconvert.com</a></li>
            <li><a href="https://convertio.co/png-ico/" target="_blank">convertio.co</a></li>
        </ul>
        <p>ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã€ç”Ÿæˆã•ã‚ŒãŸPNGãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã€ICOãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚</p>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const preview = document.getElementById('preview');
        const generateBtn = document.getElementById('generateICO');
        
        let loadedImages = [];
        
        fileInput.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            preview.innerHTML = '';
            loadedImages = [];
            
            files.forEach(file => {
                if (file.type === 'image/png') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            loadedImages.push({
                                name: file.name,
                                size: this.width,
                                data: e.target.result
                            });
                            
                            const previewDiv = document.createElement('div');
                            previewDiv.className = 'icon-preview';
                            previewDiv.innerHTML = `
                                <img src="${e.target.result}" width="64" height="64" alt="${file.name}">
                                <div>${file.name}</div>
                                <div>${this.width}Ã—${this.height}px</div>
                            `;
                            preview.appendChild(previewDiv);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });
        });
        
        generateBtn.addEventListener('click', function() {
            if (loadedImages.length === 0) {
                alert('PNGãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            // æœ€å¤§ã‚µã‚¤ã‚ºã®ç”»åƒã‚’é¸æŠï¼ˆç°¡æ˜“å®Ÿè£…ï¼‰
            const largestImage = loadedImages.reduce((prev, current) => 
                (prev.size > current.size) ? prev : current
            );
            
            // ãƒ‡ãƒ¼ã‚¿URLã‹ã‚‰Blobã‚’ä½œæˆ
            fetch(largestImage.data)
                .then(res => res.blob())
                .then(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'favicon.ico';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    alert('âš ï¸ åŸºæœ¬çš„ãªICOãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸã€‚\nå®Œå…¨ãªäº’æ›æ€§ã«ã¯ favicon.io ãªã©ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚');
                });
        });
    </script>
</body>
</html>